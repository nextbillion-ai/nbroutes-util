use geo::{LineString, Polygon};
use std::fs;

pub fn load(path: &str) -> Result<Vec<Polygon<f64>>, std::io::Error> {
    debug!("loading poly from path: {}", path);
    let contents = fs::read_to_string(path).expect("Something went wrong reading the file");
    _load(&contents)
}

fn _load(contents: &str) -> Result<Vec<Polygon<f64>>, std::io::Error> {
    let lines = contents.lines();
    let mut mode = 0;
    let mut coords: Vec<(f64, f64)> = Vec::new();
    let mut polygons: Vec<Polygon<f64>> = Vec::new();
    for line in lines {
        let trimed = line.trim_end();
        let replaced = trimed.replace("\t", " ");
        let swt = replaced.starts_with(" ");
        match mode {
            0 => {
                if swt {
                    //begin area
                    mode = 1;
                }
            }
            1 => {
                if swt {
                    let items: Vec<&str> = replaced.trim().split_whitespace().collect();
                    if items.len() == 2 {
                        let coord = (
                            items[0].parse::<f64>().unwrap(),
                            items[1].parse::<f64>().unwrap(),
                        );
                        coords.push(coord);
                    }
                }
                if trimed == "END" {
                    mode = 0;
                    polygons.push(Polygon::<f64>::new(LineString::from(coords), vec![]));
                    coords = vec![];
                }
            }
            _ => {}
        }
    }
    Ok(polygons)
}

#[cfg(test)]
mod tests {
    use std::time::Instant;

    use crate::coord::{Coord, Locatable};

    use super::*;

    #[test]
    fn test_load() {
        let usa_content = "usa-0 \n
1\n
\t-167.16796875\t72.76406472320436\n
\t-169.98046875\t65.14611484756372\n
\t-167.87109375\t64.01449619484472\n
\t-171.73828125\t60.58696734225869\n
\t-177.01171875\t38.95940879245423\n
\t-117.27905273437499\t32.523657815699146\n
\t-114.8236083984375\t32.699488680852674\n
\t-114.82910156249999\t32.51439400122826\n
\t-111.0772705078125\t31.339562861785012\n
\t-108.2208251953125\t31.344254455668054\n
\t-108.2208251953125\t31.788886163788444\n
\t-106.732177734375\t31.770207631866715\n
\t-106.45751953125\t31.751525328078905\n
\t-106.226806640625\t31.452096498983657\n
\t-106.051025390625\t31.37708906055048\n
\t-105.46875\t30.90693797089463\n
\t-104.95788574218749\t30.590637026892917\n
\t-104.7601318359375\t30.088107753367257\n
\t-104.468994140625\t29.57345707301757\n
\t-103.16162109375\t28.96489485992114\n
\t-102.9364013671875\t29.161755515328824\n
\t-102.6837158203125\t29.702368038541767\n
\t-102.3046875\t29.869228848968312\n
\t-101.4642333984375\t29.754839972510933\n
\t-101.1236572265625\t29.482643134466617\n
\t-100.7830810546875\t29.200123477644983\n
\t-100.546875\t28.69058765425071\n
\t-100.30517578125\t28.28019589809702\n
\t-99.88220214843749\t27.800209937418252\n
\t-99.5416259765625\t27.581329075043357\n
\t-99.5526123046875\t27.28880751983314\n
\t-99.151611328125\t26.41647024087778\n
\t-98.8165283203125\t26.386948928734135\n
\t-98.6846923828125\t26.249083096330665\n
\t-98.50341796875\t26.22937459341778\n
\t-98.2891845703125\t26.091321632191132\n
\t-97.66845703124999\t26.02717014049738\n
\t-97.3773193359375\t25.84439325019514\n
\t-97.3773193359375\t25.923466700919274\n
\t-97.15072631835938\t25.954340376169696\n
\t-80.37597656249999\t24.086589258228027\n
\t-78.3984375\t26.745610382199022\n
\t-66.5771484375\t42.4234565179383\n
\t-66.96390151977539\t44.8265345591127\n
\t-66.97471618652344\t44.8492972865976\n
\t-66.98295593261719\t44.8665763456234\n
\t-66.96990966796875\t44.91084546325574\n
\t-66.99668884277344\t44.92664760525882\n
\t-67.01179504394531\t44.94244540138094\n
\t-67.10792541503906\t45.10309235640864\n
\t-67.159423828125\t45.16267407976458\n
\t-67.20465660095215\t45.16914923430575\n
\t-67.21607208251952\t45.16781795422835\n
\t-67.22156524658203\t45.16364237397378\n
\t-67.22757339477538\t45.16346082006316\n
\t-67.23126411437988\t45.16757589996224\n
\t-67.2389030456543\t45.16830205967476\n
\t-67.24705696105957\t45.18016135788165\n
\t-67.27083206176758\t45.191231840601944\n
\t-67.28516578674316\t45.19141330598916\n
\t-67.28636741638184\t45.189538135754134\n
\t-67.2909164428711\t45.18766290373932\n
\t-67.29177474975586\t45.18342828161255\n
\t-67.29083061218262\t45.181431850496935\n
\t-67.29409217834473\t45.17713626135466\n
\t-67.291259765625\t45.17453454979926\n
\t-67.2916030883789\t45.17126711575688\n
\t-67.29941368103027\t45.16920974629725\n
\t-67.30276107788086\t45.16146368885962\n
\t-67.29537963867188\t45.14790555387754\n
\t-67.32044219970703\t45.14233609966964\n
\t-67.31803894042969\t45.13797701682252\n
\t-67.32078552246094\t45.13180107896713\n
\t-67.34241485595703\t45.125866704733575\n
\t-67.38121032714844\t45.15184016632338\n
\t-67.39296913146973\t45.15456396967432\n
\t-67.40515708923338\t45.16007170752883\n
\t-67.40489959716797\t45.16648664303588\n
\t-67.4007797241211\t45.17477657449326\n
\t-67.4618911743164\t45.24177781093059\n
\t-67.47493743896484\t45.2634093552273\n
\t-67.47648239135742\t45.26739639407451\n
\t-67.47665405273438\t45.27561122746045\n
\t-67.48197555541992\t45.27524883341184\n
\t-67.48695373535156\t45.28358331101929\n
\t-67.42240905761719\t45.37530235052552\n
\t-67.50343322753906\t45.4890202453737\n
\t-67.44978904724121\t45.50508367930963\n
\t-67.45300769805908\t45.50703865337609\n
\t-67.45365142822266\t45.50881310951544\n
\t-67.44996070861816\t45.51028676785687\n
\t-67.44232177734374\t45.50535437207606\n
\t-67.43227958679199\t45.503790351459735\n
\t-67.43069171905518\t45.50114344835097\n
\t-67.42794513702393\t45.50087273533682\n
\t-67.42472648620605\t45.50339933951625\n
\t-67.42485523223877\t45.5048430624245\n
\t-67.42292404174803\t45.505234064340534\n
\t-67.41837501525879\t45.501263764828344\n
\t-67.41730213165283\t45.500993052392694\n
\t-67.4155855178833\t45.501474318045055\n
\t-67.41790294647217\t45.507580018805896\n
\t-67.4210786819458\t45.5120911949112\n
\t-67.42584228515625\t45.51488794251876\n
\t-67.42541313171387\t45.51693278828882\n
\t-67.42871761322021\t45.51894749012335\n
\t-67.43279457092285\t45.519729295287874\n
\t-67.43197917938232\t45.52249559556816\n
\t-67.43185043334961\t45.52387869470391\n
\t-67.433180809021\t45.5249009635151\n
\t-67.434983253479\t45.52811798237782\n
\t-67.43524074554443\t45.5315452579927\n
\t-67.43442535400389\t45.532717699075945\n
\t-67.43489742279053\t45.53584408913993\n
\t-67.43386745452881\t45.53686614050071\n
\t-67.43257999420166\t45.54041311582023\n
\t-67.42983341217041\t45.540383057647404\n
\t-67.423996925354\t45.547055577820835\n
\t-67.42077827453613\t45.5496702683814\n
\t-67.42279529571533\t45.553486897157995\n
\t-67.42202281951904\t45.55649193428286\n
\t-67.42571353912354\t45.55994752832264\n
\t-67.4265718460083\t45.562982266067905\n
\t-67.42820262908936\t45.564965273464\n
\t-67.42820262908936\t45.56757913081182\n
\t-67.42884635925293\t45.56830017350393\n
\t-67.42876052856445\t45.568780863489934\n
\t-67.42326736450195\t45.571034042964186\n
\t-67.42532730102539\t45.57764284798647\n
\t-67.45021820068358\t45.602629114775965\n
\t-67.47776985168457\t45.603830097365396\n
\t-67.49836921691895\t45.58593279440827\n
\t-67.547550201416\t45.59794503702113\n
\t-67.55759239196777\t45.59482210127054\n
\t-67.59492874145508\t45.60539133629575\n
\t-67.63913154602051\t45.62496318280542\n
\t-67.64402389526367\t45.62316237800989\n
\t-67.63964653015137\t45.61607865124664\n
\t-67.64556884765625\t45.61331695600115\n
\t-67.66307830810547\t45.62538336226767\n
\t-67.66625404357909\t45.62424286782871\n
\t-67.67526626586914\t45.630665349703456\n
\t-67.67972946166991\t45.63804729356092\n
\t-67.6922607421875\t45.65010837727163\n
\t-67.70942687988281\t45.68129913256405\n
\t-67.71783828735352\t45.67944017083131\n
\t-67.72513389587402\t45.68525671633066\n
\t-67.72822380065918\t45.689273977132714\n
\t-67.73448944091797\t45.689034148764925\n
\t-67.73045539855957\t45.677521177806625\n
\t-67.72418975830078\t45.672363557944365\n
\t-67.71809577941895\t45.66780526567164\n
\t-67.71749496459961\t45.66504611895189\n
\t-67.7200698852539\t45.66222685031731\n
\t-67.72135734558105\t45.6619869060055\n
\t-67.72307395935059\t45.66348654108304\n
\t-67.72539138793945\t45.66402639987745\n
\t-67.7266788482666\t45.66264675038851\n
\t-67.73260116577148\t45.66342655645119\n
\t-67.73414611816406\t45.66468622022305\n
\t-67.74375915527344\t45.672363557944365\n
\t-67.75405883789061\t45.66804518504624\n
\t-67.80315399169922\t45.67716135928767\n
\t-67.80899047851562\t45.72439772280638\n
\t-67.80967712402344\t45.76536749142835\n
\t-67.8083038330078\t45.79290335020632\n
\t-67.80315399169922\t45.80295653465527\n
\t-67.78083801269531\t45.81540082150529\n
\t-67.7804946899414\t45.81779363484953\n
\t-67.77740478515624\t45.81946854301285\n
\t-67.76641845703125\t45.818990002964306\n
\t-67.75680541992188\t45.82401446834977\n
\t-67.80967712402344\t45.87088761346192\n
\t-67.75474548339844\t45.91867663909007\n
\t-67.78564453125\t45.93396044192156\n
\t-67.78942108154297\t47.06673106380406\n
\t-67.81208038330078\t47.075733642316195\n
\t-67.81688690185547\t47.08181244549481\n
\t-67.82976150512695\t47.084734700165285\n
\t-67.8676986694336\t47.10062895773739\n
\t-67.87988662719727\t47.10249855853072\n
\t-67.88829803466797\t47.10974264148426\n
\t-67.88932800292969\t47.11850432751322\n
\t-67.89344787597656\t47.12971718068695\n
\t-67.90340423583984\t47.136140146265845\n
\t-67.91147232055664\t47.14828327004237\n
\t-67.9258918762207\t47.153303174225954\n
\t-67.93172836303711\t47.16124065959858\n
\t-67.93464660644531\t47.16287470057644\n
\t-67.93790817260742\t47.16894355562019\n
\t-67.95129776000977\t47.183179301633494\n
\t-67.9507827758789\t47.18994577685743\n
\t-67.97361373901367\t47.206741572465624\n
\t-67.99043655395508\t47.209890192256225\n
\t-68.02047729492188\t47.23833590938506\n
\t-68.06116104125977\t47.25616498686374\n
\t-68.07455062866211\t47.25907766441676\n
\t-68.08158874511717\t47.27049381538843\n
\t-68.09137344360352\t47.27585156784109\n
\t-68.12089920043945\t47.2873805430142\n
\t-68.12759399414062\t47.29413372501023\n
\t-68.13634872436523\t47.29553082741946\n
\t-68.15265655517578\t47.30926703509369\n
\t-68.15420150756836\t47.312875107848335\n
\t-68.15248489379883\t47.3220687602135\n
\t-68.15471649169922\t47.32555960153742\n
\t-68.1760025024414\t47.32870116150082\n
\t-68.20261001586913\t47.339288006029356\n
\t-68.21634292602539\t47.33963698674375\n
\t-68.22338104248047\t47.34463879017408\n
\t-68.22441101074219\t47.350803151696304\n
\t-68.23471069335938\t47.35533873152513\n
\t-68.24810028076172\t47.35231505495172\n
\t-68.26475143432616\t47.3524313534081\n
\t-68.28071594238281\t47.359757639490354\n
\t-68.291015625\t47.3599902033425\n
\t-68.30097198486328\t47.35568760613518\n
\t-68.30886840820312\t47.35603647843866\n
\t-68.32895278930664\t47.360222766169485\n
\t-68.36397171020508\t47.35522243947586\n
\t-68.37907791137695\t47.3428940288458\n
\t-68.38130950927734\t47.333354980962106\n
\t-68.38491439819336\t47.32195239486326\n
\t-68.38079452514648\t47.3086850648066\n
\t-68.38525772094727\t47.30344704386265\n
\t-68.37667465209961\t47.295763674232404\n
\t-68.37495803833008\t47.29052437294242\n
\t-68.37907791137695\t47.28679833178004\n
\t-68.40705871582031\t47.28772986667867\n
\t-68.41547012329102\t47.28749698449203\n
\t-68.42988967895508\t47.28120877787292\n
\t-68.44121932983398\t47.28388717948357\n
\t-68.44619750976562\t47.28190750440981\n
\t-68.4587287902832\t47.28435297461711\n
\t-68.46525192260742\t47.29494870590137\n
\t-68.47486495971678\t47.29727715352451\n
\t-68.4803581237793\t47.29611294252935\n
\t-68.49529266357422\t47.2939008710201\n
\t-68.5026741027832\t47.296578630003346\n
\t-68.51503372192383\t47.296462208519344\n
\t-68.5275650024414\t47.29378444364052\n
\t-68.53734970092772\t47.285866780475985\n
\t-68.55159759521484\t47.28214041120473\n
\t-68.56910705566406\t47.28679833178004\n
\t-68.57889175415039\t47.2878463073875\n
\t-68.58970642089844\t47.280859411143915\n
\t-68.59245300292969\t47.274570415513864\n
\t-68.59794616699219\t47.270726772426436\n
\t-68.59743118286133\t47.26746528058422\n
\t-68.5931396484375\t47.25861164677517\n
\t-68.60052108764648\t47.252786080175\n
\t-68.61099243164062\t47.245561487511594\n
\t-68.6312484741211\t47.24229844522681\n
\t-68.64652633666991\t47.23961793870555\n
\t-68.65459442138672\t47.23891865383081\n
\t-68.6590576171875\t47.23565520238359\n
\t-68.69029998779297\t47.24404652858924\n
\t-68.70712280273438\t47.23798625964116\n
\t-68.71536254882812\t47.241016480767314\n
\t-68.73527526855469\t47.23612142203894\n
\t-68.7685775756836\t47.22166670529949\n
\t-68.80256652832031\t47.21607027274681\n
\t-68.89732360839844\t47.1780455381556\n
\t-69.04975891113281\t47.25266956230587\n
\t-69.05593872070311\t47.3751046548669\n
\t-69.03259277343749\t47.40671472747142\n
\t-69.05799865722656\t47.43087434400905\n
\t-69.10743713378906\t47.429480821310165\n
\t-69.13078308105469\t47.44341438795746\n
\t-69.22897338867188\t47.45873704984453\n
\t-69.99938964843749\t46.6965511173143\n
\t-70.06118774414062\t46.42081919374916\n
\t-70.29464721679688\t46.193140876238004\n
\t-70.23696899414062\t46.15415111633001\n
\t-70.3179931640625\t45.97024259702345\n
\t-70.26443481445311\t45.96356082681656\n
\t-70.25894165039062\t45.897654534346906\n
\t-70.42236328125\t45.79625461321962\n
\t-70.39077758789062\t45.733025435949735\n
\t-70.55557250976562\t45.66780526567164\n
\t-70.72380065917969\t45.51212126820532\n
\t-70.62973022460938\t45.425925470603616\n
\t-70.65238952636719\t45.378196322122854\n
\t-70.71830749511719\t45.39266395850033\n
\t-70.74851989746094\t45.42110617524166\n
\t-70.79727172851562\t45.427371178989084\n
\t-70.80825805664062\t45.32753043597215\n
\t-70.83366394042967\t45.296626122565904\n
\t-70.83778381347656\t45.235734007972006\n
\t-70.88241577148438\t45.232349197513095\n
\t-70.92086791992188\t45.28068450114256\n
\t-70.91743469238281\t45.30387083299528\n
\t-70.95657348632812\t45.336701909968134\n
\t-71.01150512695312\t45.347319655945526\n
\t-71.0101318359375\t45.31980593747679\n
\t-71.10076904296875\t45.30193900072719\n
\t-71.13784790039061\t45.243469960558265\n
\t-71.23260498046875\t45.25120485988152\n
\t-71.28822326660156\t45.30193900072719\n
\t-71.36032104492188\t45.26957102450825\n
\t-71.38504028320312\t45.235734007972006\n
\t-71.44340515136719\t45.238151606298864\n
\t-71.39877319335938\t45.20671480511059\n
\t-71.43997192382812\t45.14185177358869\n
\t-71.42692565917969\t45.12877341415654\n
\t-71.50657653808594\t45.052180659942316\n
\t-71.49215698242188\t45.045874151266844\n
\t-71.50177001953125\t45.01433117775016\n
\t-72.04216003417967\t45.00607860920862\n
\t-72.55508422851562\t45.00753503123719\n
\t-72.5921630859375\t45.01433117775016\n
\t-72.95951843261719\t45.01481658592836\n
\t-73.05427551269531\t45.01675817749666\n
\t-73.75602722167969\t45.00413665556814\n
\t-73.93798828125\t44.99782485158904\n
\t-74.33074951171875\t44.992483551267625\n
\t-74.45915222167967\t44.99782485158904\n
\t-74.66119766235352\t44.999524251832405\n
\t-74.67338562011719\t45.00073807829067\n
\t-74.72145080566406\t44.9992814834549\n
\t-74.73106384277344\t44.99054113680792\n
\t-74.76127624511719\t44.99394031891056\n
\t-74.76367950439453\t45.00559312697019\n
\t-74.79251861572266\t45.00510764061729\n
\t-74.82685089111328\t45.01651548215075\n
\t-74.90959167480469\t44.98422783516651\n
\t-74.97344970703124\t44.98374216777751\n
\t-75.00022888183594\t44.96552667056723\n
\t-75.1406478881836\t44.89771422497743\n
\t-75.2182388305664\t44.87728189251396\n
\t-75.30750274658203\t44.83639545410477\n
\t-75.30200958251953\t44.826656308843\n
\t-75.34252166748047\t44.807660241989545\n
\t-75.3607177734375\t44.78914523445827\n
\t-75.39573669433594\t44.775986224030376\n
\t-75.76583862304688\t44.514624359286444\n
\t-75.80909729003906\t44.47152122299265\n
\t-75.82077026367188\t44.43328953788211\n
\t-75.92926025390625\t44.35920579433503\n
\t-75.97251892089844\t44.343984944818594\n
\t-76.00067138671875\t44.349877355494655\n
\t-76.17919921875\t44.275688020707946\n
\t-76.15310668945312\t44.238312212932016\n
\t-76.22726440429688\t44.203866109361435\n
\t-76.31378173828125\t44.19598988458207\n
\t-76.35223388671875\t44.13294218313968\n
\t-76.453857421875\t44.09942068528651\n
\t-76.783447265625\t43.64005063334696\n
\t-79.1949462890625\t43.45291889355465\n
\t-79.07203674316406\t43.26370627659918\n
\t-79.05590057373047\t43.25545538602179\n
\t-79.0576171875\t43.23794979566157\n
\t-79.05349731445312\t43.22544272252857\n
\t-79.0572738647461\t43.21068107507132\n
\t-79.04937744140625\t43.19979519883745\n
\t-79.05384063720703\t43.17488801771465\n
\t-79.0469741821289\t43.16274364719666\n
\t-79.04268264770508\t43.14909399920127\n
\t-79.0437126159668\t43.138572924273255\n
\t-79.04972076416016\t43.13519076565569\n
\t-79.05607223510742\t43.12754890374651\n
\t-79.0605354309082\t43.12629604840407\n
\t-79.07014846801756\t43.120657881817024\n
\t-79.0601921081543\t43.11451795391612\n
\t-79.0579605102539\t43.107374813628546\n
\t-79.06620025634764\t43.091832471083436\n
\t-79.07546997070312\t43.08167768154824\n
\t-79.07615661621094\t43.077916221183784\n
\t-79.00955200195312\t43.06738290368879\n
\t-78.99993896484375\t43.055844335920945\n
\t-79.00474548339844\t43.05132865306444\n
\t-79.02740478515624\t43.02021158082207\n
\t-79.024658203125\t42.99008326212536\n
\t-78.98689270019531\t42.9730039894005\n
\t-78.9649200439453\t42.956422511073335\n
\t-78.93402099609374\t42.95441233121331\n
\t-78.9093017578125\t42.93531234761953\n
\t-78.90655517578125\t42.90111863978984\n
\t-78.9422607421875\t42.827638636242284\n
\t-82.6776123046875\t41.679066225164114\n
\t-83.07037353515625\t41.863936040569634\n
\t-83.15277099609375\t42.03960414978025\n
\t-83.12324523925781\t42.12012663915215\n
\t-83.13560485839844\t42.17205523161925\n
\t-83.13011169433594\t42.23665188032057\n
\t-83.10195922851562\t42.28797686534489\n
\t-83.08067321777344\t42.30727643850873\n
\t-83.05938720703125\t42.319462594992416\n
\t-83.01612854003906\t42.32910829547645\n
\t-82.9632568359375\t42.338244963350846\n
\t-82.94609069824219\t42.3468728197949\n
\t-82.83004760742188\t42.371734722510496\n
\t-82.66456604003906\t42.54195129663955\n
\t-82.6336669921875\t42.55763248666914\n
\t-82.60826110839844\t42.549033612225145\n
\t-82.58766174316406\t42.55004530600437\n
\t-82.58216857910155\t42.56420729713456\n
\t-82.56568908691406\t42.57684921609549\n
\t-82.55264282226562\t42.59151063198149\n
\t-82.52517700195312\t42.60616859983072\n
\t-82.51144409179688\t42.635474190826905\n
\t-82.51281738281249\t42.664765987909526\n
\t-82.48672485351562\t42.71675017681163\n
\t-82.48466491699219\t42.73238738525821\n
\t-82.46749877929688\t42.76112938488444\n
\t-82.48329162597656\t42.80900310137467\n
\t-82.47161865234375\t42.88954882665412\n
\t-82.45513916015625\t42.93279875072146\n
\t-82.42218017578125\t42.96094517567432\n
\t-82.41531372070312\t42.978530155644734\n
\t-82.42630004882811\t42.99862111927107\n
\t-82.11181640625\t43.60426186809618\n
\t-83.6004638671875\t45.82114340079471\n
\t-83.41781616210938\t46.038922598236\n
\t-83.65264892578125\t46.1237008771406\n
\t-83.95065307617188\t46.057985244793024\n
\t-84.0838623046875\t46.188387507419954\n
\t-84.11819458007811\t46.27103747280261\n
\t-84.111328125\t46.323223245368716\n
\t-84.14840698242188\t46.413245172571244\n
\t-84.10995483398438\t46.50122820195782\n
\t-84.1387939453125\t46.53052428878426\n
\t-84.210205078125\t46.538082005463075\n
\t-84.24728393554688\t46.50689964492765\n
\t-84.2926025390625\t46.493665357623776\n
\t-84.364013671875\t46.50784482789971\n
\t-84.42855834960938\t46.49839225859763\n
\t-84.47113037109375\t46.45488927067795\n
\t-84.57275390625\t46.4605655457854\n
\t-84.8583984375\t46.882723010671945\n
\t-88.3795166015625\t48.31060120649363\n
\t-89.329833984375\t47.98624517426206\n
\t-90.74981689453125\t48.09459164290992\n
\t-90.8734130859375\t48.246625590713826\n
\t-91.43920898437499\t48.05605376398125\n
\t-92.1533203125\t48.36354888898689\n
\t-92.373046875\t48.23930899024907\n
\t-92.64770507812499\t48.54752375797609\n
\t-93.2135009765625\t48.64379839242537\n
\t-93.47442626953124\t48.59114254808809\n
\t-93.4552001953125\t48.55297816440071\n
\t-93.8067626953125\t48.52024290640028\n
\t-93.834228515625\t48.629278127969414\n
\t-94.27093505859375\t48.696399319877806\n
\t-94.54010009765625\t48.705462895790546\n
\t-94.67193603515625\t48.75981008089207\n
\t-94.8284912109375\t49.33228198473771\n
\t-95.16357421875\t49.3787965643504\n
\t-95.152587890625\t49.009050809382046\n
\t-123.34350585937499\t49.009050809382046\n
\t-125.189208984375\t50.025387620270244\n
\t-125.52978515625001\t50.35597574998605\n
\t-126.4691162109375\t50.49595785216966\n
\t-126.89758300781249\t50.726024296594694\n
\t-127.72705078124999\t50.958426723359935\n
\t-131.1328125\t53.12040528310657\n
\t-131.0888671875\t54.482804559582554\n
\t-130.0341796875\t55.27911529201561\n
\t-130.18798828125\t55.61558902526749\n
\t-130.05615234375\t56.08429756206141\n
\t-131.81396484375\t56.668302075770065\n
\t-133.83544921875\t58.73400476743346\n
\t-134.36279296875\t58.89329575587951\n
\t-135.52734375\t59.77852198502987\n
\t-137.4609375\t59.06315402462662\n
\t-141.064453125\t60.326947742998414\n
\t-141.064453125\t69.64180371719554\n
\t-140.9765625\t71.35706654962706\n
\t-167.16796875\t72.76406472320436\n
END\n
END";
        let polygons = _load(usa_content).unwrap();
        let now = Instant::now();
        let coord = Coord::coord("24.2050449,77.1064213").unwrap();
        //let coord = Coord::coord("41.577330,-105.691938").unwrap();
        let ok = coord.is_in_polygons(&polygons);
        println!("elapsed: {} us", now.elapsed().as_micros());
        assert!(ok)
    }
}
